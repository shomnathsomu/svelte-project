{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\pages\\Home.svelte",
    "..\\src\\components\\PostForm.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import { onMount } from \"svelte\";\r\n  import PostForm from \"../components/PostForm.svelte\";\r\n  let postLimit = 6;\r\n  const apiBaseUrl =\r\n    \"https://ndb99xkpdk.execute-api.eu-west-2.amazonaws.com/dev\";\r\n  let posts = [];\r\n  let editingPost = {\r\n    body: \"\",\r\n    title: \"\",\r\n    id: null\r\n  };\r\n  onMount(async () => {\r\n    const res = await fetch(apiBaseUrl + \"/posts\");\r\n    posts = await res.json();\r\n  });\r\n  function addPost({ detail: post }) {\r\n    if (posts.find(p => p.id === post.id)) {\r\n      const index = posts.findIndex(p => p.id === post.id);\r\n      let postsUpdated = posts;\r\n      postsUpdated.splice(index, 1, post);\r\n      posts = postsUpdated;\r\n    } else posts = [post, ...posts];\r\n    editingPost = {\r\n      body: \"\",\r\n      title: \"\",\r\n      id: null\r\n    };\r\n  }\r\n  function editPost(post) {\r\n    editingPost = post;\r\n  }\r\n  function deletePost(id) {\r\n    if (confirm(\"Are you sure?\")) {\r\n      fetch(`${apiBaseUrl}/post/${id}`, {\r\n        method: \"DELETE\"\r\n      })\r\n        .then(res => {\r\n          return res.json();\r\n        })\r\n        .then(() => {\r\n          posts = posts.filter(p => p.id !== id);\r\n        });\r\n    }\r\n  }\r\n  function setLimit() {\r\n    fetch(`${apiBaseUrl}/posts/${postLimit}`)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(postsData => {\r\n        posts = postsData;\r\n      });\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .delete-btn {\r\n    color: red !important;\r\n  }\r\n  .card .card-content .card-title {\r\n    margin-bottom: 0;\r\n  }\r\n  .card .card-content p.timestamp {\r\n    color: #999;\r\n    margin-bottom: 10px;\r\n  }\r\n</style>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col s6\">\r\n    <PostForm on:postCreated={addPost} {editingPost} />\r\n  </div>\r\n  <div class=\"col s3\" style=\"margin:50px\">\r\n    <p>Limit number of posts</p>\r\n    <input type=\"number\" bind:value={postLimit} />\r\n    <button on:click={setLimit} class=\"waves-effect waves-light btn\">\r\n      Set\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"row\">\r\n  {#if posts.length === 0}\r\n    <h3>Loading posts...</h3>\r\n  {:else}\r\n    {#each posts as post}\r\n      <div class=\"col s6\">\r\n        <div class=\"card\">\r\n          <div class=\"card-content\">\r\n            <p class=\"card-title\">{post.title}</p>\r\n            <p class=\"timestamp\">{post.createdAt}</p>\r\n            <p>{post.body}</p>\r\n          </div>\r\n          <div class=\"card-action\">\r\n            <a href=\"#\" on:click={() => editPost(post)}>Edit</a>\r\n            <a href=\"#\" class=\"delete-btn\" on:click={() => deletePost(post.id)}>\r\n              Delete\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    {/each}\r\n  {/if}\r\n</div>\r\n",
    "<script>\r\n  import { createEventDispatcher } from \"svelte\";\r\n  export let editingPost;\r\n\r\n  const dispatch = createEventDispatcher();\r\n\r\n  $: title = editingPost.title;\r\n  $: body = editingPost.body;\r\n  let loading = false;\r\n\r\n  const apiBaseUrl =\r\n    \"https://ndb99xkpdk.execute-api.eu-west-2.amazonaws.com/dev\";\r\n\r\n  async function onSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    if (title.trim() === \"\" || body.trim() === \"\") return;\r\n\r\n    loading = true;\r\n\r\n    const newPost = { title, body };\r\n\r\n    let url, method;\r\n\r\n    if(editingPost.id) {\r\n        url = `${apiBaseUrl}/post/${editingPost.id}`;\r\n        method = 'PUT';\r\n    }\r\n    else{\r\n        url = `${apiBaseUrl}/post`;\r\n        method = 'POST';\r\n    }\r\n\r\n    const res = await fetch(url, {\r\n      method,\r\n      body: JSON.stringify(newPost)\r\n    });\r\n\r\n    const post = await res.json();\r\n    dispatch('postCreated', post);\r\n\r\n    loading = false;\r\n  }\r\n</script>\r\n\r\n<style>\r\n  form {\r\n    margin: 50px;\r\n  }\r\n  .progress {\r\n    margin: 100px 0;\r\n  }\r\n</style>\r\n\r\n{#if !loading}\r\n  <form on:submit={onSubmit}>\r\n    <div class=\"input-field\">\r\n      <label for=\"title\">Title</label>\r\n      <input type=\"text\" bind:value={editingPost.title} />\r\n    </div>\r\n    <div class=\"input-field\">\r\n      <label for=\"body\">Body</label>\r\n      <input type=\"text\" bind:value={editingPost.body} />\r\n    </div>\r\n    <button type=\"submit\" class=\"waves-effect waves-light btn\">\r\n        {editingPost.id ? \"UPDATE\" : \"ADD\"}\r\n    </button>\r\n  </form>\r\n{:else}\r\n  <div class=\"progress\">\r\n    <div class=\"indeterminate\" />\r\n  </div>\r\n{/if}\r\n"
  ],
  "names": [],
  "mappings": "AAyDE,WAAW,cAAC,CAAC,AACX,KAAK,CAAE,GAAG,CAAC,UAAU,AACvB,CAAC,AACD,mBAAK,CAAC,aAAa,CAAC,WAAW,cAAC,CAAC,AAC/B,aAAa,CAAE,CAAC,AAClB,CAAC,AACD,mBAAK,CAAC,aAAa,CAAC,CAAC,UAAU,cAAC,CAAC,AAC/B,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,IAAI,AACrB,CAAC;ACpBD,IAAI,cAAC,CAAC,AACJ,MAAM,CAAE,IAAI,AACd,CAAC,AACD,SAAS,cAAC,CAAC,AACT,MAAM,CAAE,KAAK,CAAC,CAAC,AACjB,CAAC"
}